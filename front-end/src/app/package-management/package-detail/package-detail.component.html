<div class="main">

    <div class="heading show-border">
        <div class="back-btn-div">
            <button mat-button (click)="onBack()" class="back-btn">
                <span class="material-icons back-btn-span">
                    arrow_back
                </span>
            </button>
        </div>
        <p class="title"> {{this.package.name}} </p>

        <span class="example-spacer"></span>


        <div class="statistic">
            <mat-icon class="icon" [matBadge]="this.package.downloadCount" matBadgeSize="small" matBadgeColor="accent" matBadgePosition="above after">download</mat-icon>
            <!-- <mat-icon class="icon" [matBadge]="this.package.downloadCount" matBadgeSize="small" matBadgeColor="accent" matBadgePosition="above after">thumb_up</mat-icon> -->
        </div>
    </div>
    <div class="top-section">
        <div>
            <gallery class="image-gallery" [items]="images" [thumb]="false" (itemClick)="onGalleryItemClick($event)" [autoPlay]="true" #gallery></gallery>

            <input type="file" accept="image/*" hidden="true" #imageInput (change)="onUploadScreenshot(imageInput)">
            <!-- <button mat-button mat-stroked-button color="accent" (click)="imageInput.click()">更新</button> -->

        </div>
        <div style="width: 100%; padding-left: 10px;">
            <div class="col-right show-border">

                <div class="author-info top-border show-border">
                    <div class="heading-1">作者</div>
                    <div class="author-card show-border" style="display: flex;" (click)="onAuthorClick()">
                        <img [hidden]="this.hideAuthorImage" [src]="this.authorImageUrl" (load)="this.hideAuthorImage = false;" class="author-image">

                        <span style="display: inline-flex;  align-items: center;">
                        {{this.author.username}}
                        </span>
                    </div>
                </div>


                <div>
                    <div class="heading-1">创建日期</div>
                    <div class="content">{{this.package.createTimestamp}}</div>
                </div>

                <div [hidden]="! (isAdmin() || isAuthor())" class="package-controller top-border show-border">
                    <div class="admin-zone" *ngIf="adminZone">
                        <button mat-button mat-raised-button color="accent" (click)="onApprove()">通过审核</button>
                    </div>

                    <span [hidden]="!adminZone" class="example-spacer"></span>

                    <span class="example-spacer"></span>
                    <div class="author-zone" *ngIf="authorZone">

                        <span class="example-spacer"></span>
                        <!-- dangerous zone -->
                        <div class="">
                            <button class="button" mat-button mat-raised-button color="warn" (click)="onDelete()">删除</button>
                        </div>

                    </div>
                </div>

            </div>
        </div>
    </div>

    <div class="top-border">
        <div class="heading-1" style="display: flex;">
            <span class="">描述</span>
            <span class="example-spacer"></span>
            <button *ngIf="!this.descEditor_disabled" [disabled]="!this.descEditor_updated" mat-button mat-raised-button color="primary" (click)="onUpdateDesc()">更新</button>
        </div>
        <ckeditor [data]="this.descEditor_data" [editor]="descEditor" (ready)="onDescEditorReady($event)" (change)="onDescEditorChange($event)" [disabled]="this.descEditor_disabled" [config]="this.descEditor_config"></ckeditor>
    </div>

    <div class="version-info top-border show-border ">
        <app-version-panel [package]="this.package " (downloadEvent)="onChildDownload($event) "> </app-version-panel>
    </div>

    <app-comment-board [parent]="this.getPackageUrl() " class="comment-section "></app-comment-board>

</div>